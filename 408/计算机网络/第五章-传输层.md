# 第五章 传输层

## 一、服务

```
    传输层向上层(应用层)提供通信服务；
    为进程之间（端到端）提供逻辑通信
    主机的协议栈才有 传输层和应用层；路由器只有下三层
```

### 1.1 功能

1. 端到端的通信
2. 复用和分用（网络层也有）
3. 差错检测（首部 & 数据部分）（网络层只检查IP首部）
4. TCP & UDP 两种传输协议 （同时提供，网络层只提供面向连接或无连接一种）
   
   ### 1.2 寻址 & 端口
   
   #### 1.2.1 数据链路层寻址
   
   MAC地址-SAP
   
   #### 1.2.2 网络层寻址
   
   IP地址-SAP
   
   #### 1.2.3 传输层寻址
   
   套接字:= <IP地址:端口号>
   套接字用来标识网络中某台主机上的某个应用程序
   
   ##### 端口-SAP
   
   端口是传输层的服务访问点(SAP)
   
   ##### 常见端口号
- 16bit
  服务器端口号

- 熟知端口号(0~1023)

| 描述    | 文件传输协议 | 远程终端   | 简单邮件传输 | 域名服务器  | 动态主机配置 | 小文件传输 | 超文本  |
| ----- | ------ | ------ | ------ | ------ | ------ | ----- | ---- |
| 应用程序  | FTP    | TELNET | SMTP   | DNS    | DHCP   | TFTP  | HTTP |
| 熟知端口号 | 21     | 23     | 25     | 53     | 67/68  | 69    | 80   |
|       |        |        |        |        |        |       |      |
| 描述    | 邮局协议   | 网络时间协议 | 简单网络管理 | 路由信息协议 |        |       |      |
| 应用程序  | POP3   | NTP    | SNMP   | RIP    |        |       |      |
| 熟知端口号 | 110    | 123    | 161    | 520    |        |       |      |

- 登记端口号(1024~49151)

- 客户端使用的端口号(49152~65535)：应用程序使用的端口号；临时端口号

### 1.3 无连接 & 面向连接服务

#### 1.3.1 无连接-UDP

UDP-无连接非可靠的传输层协议

#### 1.3.2 面向连接-TCP



## 二、UDP

### 1.1 服务

### 1.2 优点

- ### 1.3 首部格式
  
  ### 1.4 UDP校验
  
  ## 三、TCP
  
  ### 1.1 特点
  
  ### 1.2 首部
  
  ### 1.3 连接管理
  
  #### 1.3.1 连接建立 - 三次握手
  
  #### 1.3.2 连接释放 - 四次握手
